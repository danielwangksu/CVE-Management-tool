#!/usr/bin/env python
from os import path
import re
from setuptools import find_packages, setup
import pathlib

def open_file(filepath, mode='r'):
    # here = pathlib.Path(__file__).parent.resolve()
    here = path.abspath(path.dirname(__file__))
    full_path = path.join(here, filepath)
    return open(full_path, mode)

def find_version(package):
    with open_file('{}/__init__.py'.format(package)) as f:
        return re.findall(r"^__version__ = '([^']+)'\r?$", f.read(), re.M)[0]

def find_requires():
    with open_file('requirements.txt') as f:
        return [line.strip() for line in f]

VERSION = find_version('cve_web_backend')
PACKAGES = find_packages()
REQUIRES = find_requires()

setup(
    name='cve-web-backend',
    version=VERSION,
    author = "Daniel Wang",
    author_email = "daniel.wangksu@gmail.com",
    packages=PACKAGES,
    entry_points = {
        'console_scripts': ['start=cve_web_backend.cli:start',
                            'start_server=cve_web_backend.cli:start_server',
                            'update_database=cve_web_backend.cli:update_database'

        ]
    },
    include_package_data=True,
    zip_safe=False,
    install_requires=REQUIRES
    )